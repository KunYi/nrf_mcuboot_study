# 啟用 GPIO
CONFIG_GPIO=y

# nRF board library
CONFIG_DK_LIBRARY=y

# 啟用 UART
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y

# MCUboot 配置
CONFIG_BOOTLOADER_MCUBOOT=y
CONFIG_MCUBOOT_IMG_MANAGER=y
CONFIG_IMG_MANAGER=y

# Flash 配置
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y

# Partition Manager Configuration
CONFIG_PARTITION_MANAGER_ENABLED=y
CONFIG_PM_EXTERNAL_FLASH_MCUBOOT_SECONDARY=n
CONFIG_PM_SINGLE_IMAGE=y

# DFU 相關配置
CONFIG_UPDATEABLE_IMAGE_NUMBER=1
CONFIG_MCUBOOT_UPDATE_FOOTER_SIZE=0x2000

# DFU Configuration
CONFIG_DFU_TARGET=y
CONFIG_DFU_TARGET_MCUBOOT=y
CONFIG_STREAM_FLASH=y
CONFIG_STREAM_FLASH_ERASE=y
CONFIG_PM_PARTITION_SIZE_SETTINGS_STORAGE=0x4000
CONFIG_SETTINGS_FCB=y
CONFIG_SETTINGS=y
CONFIG_FCB=y

# BLE 配置
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DFU_SMP=y
CONFIG_BT_DEVICE_NAME="nRF52840_DFU"

# Enable GATT and DFU-related services
CONFIG_BT_GATT_SERVICE_CHANGED=y

# Enable MCUboot and DFU support
CONFIG_MCUMGR=y
CONFIG_MCUMGR_GRP_OS_MCUMGR_PARAMS=y
#CONFIG_MCUMGR_GRP_ZBASIC=y
CONFIG_MCUMGR_GRP_IMG=y
CONFIG_MCUMGR_GRP_OS=y
CONFIG_MCUMGR_GRP_OS_INFO=y
CONFIG_MCUMGR_GRP_OS_BOOTLOADER_INFO=y
CONFIG_MCUMGR_GRP_ENUM=y
CONFIG_MCUMGR_TRANSPORT_BT=y
CONFIG_MCUMGR_TRANSPORT_BT_CONN_PARAM_CONTROL=y
CONFIG_MCUMGR_TRANSPORT_NETBUF_SIZE=2048
# Enable MCUmgr and dependencies

# Enable ZCBOR (required by MCUMGR)
CONFIG_ZCBOR=y
CONFIG_ZCBOR_CANONICAL=y

# BLE SMP 配置
CONFIG_BT_SMP=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_L2CAP_TX_MTU=498
CONFIG_BT_BUF_ACL_RX_SIZE=502
CONFIG_BT_BUF_ACL_TX_SIZE=502

# MCUboot 簽名配置
# CONFIG_BOOT_SIGNATURE_TYPE_RSA=y
CONFIG_BOOT_SIGNATURE_KEY_FILE="bootloader/mcuboot/root-rsa-2048.pem"

# Stack and heap settings (adjust based on your application requirements)
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_HEAP_MEM_POOL_SIZE=2048

# Logging and debugging
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
